<div class='image-preview-box'>
  <img
    *ngIf='image.content'
    [src]='image.content'
    [alt]='image.name'
    (fileDropped)='onFilesDrop($event)'
    [class]='image.toDelete ? "image-preview to-delete" : "image-preview"'
    dnd
  />
  <div
    *ngIf='image'
    class='image-preview-bottom-section'
  >
    <div
      *ngIf='image._id !== "placeholder"'
      class='tags-box'
    >
      <div *ngFor='let tag of image.tags'>
        <div [class]='tag.system ? image._id ? "tag system-tag" : "tag system-tag not-saved" : "tag"'>
          <p>{{tag.label}}</p>
          <div
            *ngIf='!tag.system'
            (click)='removeTag(image, tag)'
            class='tag-button remove-tag'
          >
            <img class='icon' src='/assets/close-icon.svg' alt='Remove tag' />
          </div>
        </div>
      </div>
      <div
        *ngIf='!isAddingTags'
        (click)='addTag()'
        class='tag-button add-tag'
      >
        <img class='icon' src='/assets/add-icon.png' alt='Add tag' />
      </div>
      <div class='tag-input-box'>
        <input
          *ngIf='isAddingTags'
          [(ngModel)]='newTagLabel'
          (keydown)='onTagInputKeyDown($event)'
          [attr.aria-invalid]='isInvalidNewTag'
          class='tag-input'
        >
        <div
          *ngIf='isAddingTags'
          (click)='cancelAddTag()'
          class='tag-button cancel-add-tag'
        >
          <img class='icon' src='/assets/close-icon.svg' alt='Cancel new tag' />
        </div>
        <div
          *ngIf='isAddingTags'
          (click)='saveTag()'
          class='tag-button save-tag'
        >
          <img class='icon' src='/assets/done-icon.svg' alt='Submit new tag' />
        </div>
      </div>
    </div>
  </div>
</div>
